# Перенос аудиозаписей ВК в плейлист | VK аудио экспорт

> Скрипт для переноса всех треков из «Мои аудиозаписи» ВКонтакте в плейлисты. Яндекс Музыка импортирует только плейлисты из ВК — этот скрипт создаёт их, чтобы можно было перенести всю коллекцию.

[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

---

## Возможности

- **Полный экспорт** — загружает все аудиозаписи
- **Перенос в Яндекс Музыку** — Яндекс Музыка импортирует только плейлисты из ВК. Этот скрипт собирает все аудиозаписи в плейлисты — после этого их можно загрузить в Яндекс Музыку
- **Один клик** — создаёт плейлист(ы) и добавляет всю коллекцию (API добавляет только 1000 в плейлист — при большем объёме создаётся несколько)
- **Два способа входа** — логин/пароль или cookies из браузера (если не приходит код 2FA)
- **Сохраняет порядок** — треки добавляются от старых к новым

## Требования

- Python 3.10+
- Аккаунт ВКонтакте с аудиозаписями

## Установка

```bash
git clone https://github.com/YOUR_USERNAME/one_playlist_vk.git
cd one_playlist_vk
pip install -r requirements.txt
```

## Быстрый старт

```bash
python transfer_to_album.py
```

При первом запуске скрипт откроет браузер для получения токена Kate. Войдите в ВК, скопируйте `access_token` из адресной строки и вставьте в консоль.

## Подробная инструкция

### 1. Получение Kate-токена (один раз)

1. Запустите `python transfer_to_album.py`
2. Откроется авторизация ВК → войдите (при 2FA введите код)
3. В URL найдите `access_token=...` и скопируйте значение до `&`
4. Вставьте токен в консоль — он сохранится в `config_vk.ini`

### 2. Загрузка треков: логин/пароль или cookies

**Вариант А: логин и пароль**  
Нажмите Enter при вопросе о cookies, введите логин и пароль. При 2FA — код из SMS или приложения.

**Вариант Б: cookies** (если код 2FA не приходит)  
1. Войдите на [vk.com](https://vk.com) в браузере  
2. Установите [Get cookies.txt LOCALLY](https://chrome.google.com/webstore/detail/get-cookiestxt-locally/cclelndahbckbenkjhflpdbgdldlbecc) (Chrome)  
3. Экспортируйте cookies → сохраните как `cookies.txt`  
4. Укажите путь к файлу при запуске скрипта

### 3. Результат

Скрипт создаст один или несколько плейлистов и перенесёт в них все аудиозаписи (API добавляет максимум 1000 в один плейлист; при большем объёме — несколько «Название (1)», «Название (2)» и т.д.). Время работы зависит от размера коллекции (прогресс показывается каждые 100 треков).

### 4. Плейлисты в ВК

Плейлисты появятся в разделе **«Мои аудиозаписи»** → вкладка **«Альбомы»** (на сайте vk.com) или в мобильном приложении — **«Моя музыка»** → «Плейлисты».

## Ограничения ВК

**~300 треков через API** — если просто запросить у ВК список аудио, он отдаёт только последние ~300. Поэтому скрипт заходит на сайт ВК (логин или cookies) и загружает полный список. Если получилось мало треков — попробуйте cookies.

**1000 треков в плейлисте** — API ВК ограничивает один плейлист 1000 аудиозаписями. При коллекции больше 1000 скрипт создаёт несколько плейлистов «Название (1)», «Название (2)» и т.д.

## Важно

- **«Мои аудиозаписи»** — старый раздел ВК (с ~2010), не путать с VK Music

## Устранение неполадок

| Проблема | Решение |
|----------|---------|
| «Нет токена» | Выполните шаги получения Kate-токена |
| «API auth error (no login cookies)» | Укажите Kate-токен в `config_vk.ini` при использовании cookies |
| Код 2FA не приходит | Используйте cookies из браузера |
| «Access Denied» | Обновите cookies — войдите на vk.com заново и экспортируйте снова |
| «Read timed out» | ВК долго не отвечает; скрипт повторяет попытки автоматически, подождите или запустите снова |

## Структура проекта

| Файл | Описание |
|------|----------|
| `transfer_to_album.py` | Основной скрипт |
| `requirements.txt` | Зависимости |
| `config_vk.ini` | Токен (создаётся автоматически) |
| `config_vk.ini.example` | Образец конфига |

## Лицензия

[MIT](LICENSE)
